-----
### 네트워크
-----
<div align="center">
<img src="https://github.com/user-attachments/assets/fb5d00ea-d4e3-4920-9ddc-688ffe9630dc">
</div>

1. 여러 개의 장치들이 서로 연결되어 정보를 주고받을 수 있는 시스템
   - 기계와 기계 사이를 랜선이라는 케이블로 물리적 연결
   - 물리적인 케이블을 통해 전기신호를 통해 정보 주고받기 가능
   - 즉, 물리적인 인터넷 선으로 연결되어 있고, 마치 그물망처럼 촘촘하게 짜여져있어 네트워크라 불림
  
2. 네트워크에서는 어떤 정보를 보내기 위해 목적지 주소가 필요
   - IP 주소로 장치들의 위치를 관리 (컴퓨터에는 인터넷에 연결할 때 IP 주소를 할당 받음)
   - 이 IP 주소를 활용해 서로 통신을 하며, 8비트 3자리 숫자 4개의 조합으로 만들어진 주소 (0.0.0.0 ~ 255.255.255.255 범위의 고유한 값)
   - 주소 역할을 하려면 고유해야하므로, 다른 IP와 중복 불가
   - IP 주소는 특정 위치에 고정되어 있는 것이 아닌 바뀔 수 있음
  
3. 일반적인 가정용 인터넷은 동적 IP를 사용하므로 시간이 지나면 할당된 IP가 변경 가능
   - 보통 통신사의 인터넷에 가입하면 회선당 하나의 IP를 할당받아 사용

4. ping 명령어 : 상대방 서버에 응답이 있는지 확인하는 명령
   - ping이 성공했다는 것은 네트워크망을 타고 해당 IP 주소로 신호를 보내고 다시 돌아오는 것을 의미
```
C:\Users\young>ping 8.8.8.8

Ping 8.8.8.8 32바이트 데이터 사용:
8.8.8.8의 응답: 바이트=32 시간=39ms TTL=54
8.8.8.8의 응답: 바이트=32 시간=40ms TTL=54
8.8.8.8의 응답: 바이트=32 시간=40ms TTL=54
8.8.8.8의 응답: 바이트=32 시간=41ms TTL=54

8.8.8.8에 대한 Ping 통계:
    패킷: 보냄 = 4, 받음 = 4, 손실 = 0 (0% 손실),
왕복 시간(밀리초):
    최소 = 39ms, 최대 = 41ms, 평균 = 40ms
```

5. 정리
   - 네트워크는 기기 간 정보를 주고받기 위한 통신망
   - 전 세계 네트워크 신호는 IP 주소 체계를 사용해 원하는 목적지를 찾아감
   - 8비트 숫자 4개의 조합 : 조합 가능한 개수는 약 43억개
     + 하지만, 기술의 발전으로 IP 주소 공간이 거의 고갈되고 있음

   - 하나의 인터넷 회선으로 스마트폰, 노트북, TV 같이 다양한 기기로 인터넷을 사용하려면 사설 IP 활용 필요

<div align="center">
<img src="https://github.com/user-attachments/assets/2bc7ed19-3c9f-4600-a903-05885389a3a5">
<img src="https://github.com/user-attachments/assets/27505f69-10e5-4a2a-bb00-f722fc030bc6">
</div>

6. IP는 사설 IP와 공인 IP로 분리
   - 공인 IP : 인터넷 상에서 고유한 IP
     + 이 IP 주소를 통해 전 세계 기기들이 데이터 전송을 주고 받을 수 있음
   - 사설 IP : 하나의 공인 IP를 나누어서 정의
     + 공인 IP 안에서 사설 IP를 나눌 때에는 네트워크 장비 필요 (일반적으로 공유기 사용)

   - 공인 IP를 받는 인터넷 선을 꽂아놓은 부분을 WAN, WAN PORT라고 함
     + WAN 포트는 외부에서 돌아오는 인터넷 신호를 연결해야 함
     + 각 기기에 연결해서 사설 IP를 분배하는 곳을 LAN 포트
     + 기기의 LAN 선을 연결해 인터넷 신호 분배할 수 있으며, 공유기에 연결된 장비들은 새로운 사설 IP 주소를 할당 받아 인터넷 사용 가능
    
   - 사설 IP는 공유기처럼 하나의 네트워크 장비 안에서만 고유한 것
     + 사설 IP 주소의 대역은 정해져 있으며, 이 주소 범위에 해당하는 주소는 모두 사설 IP
     + 일반적으로 192.168 대역의 IP 주소를 사설 IP 주소로 가장 많이 사용
    
   - 사설 IP 주소 확인 : cmd 창에서, ipconfig 입력
   - 즉, IP는 외부에서 사용하는 공인 IP와 내부에서만 사용하는 사설 IP로 관리할 수 있으며, 공인 IP를 공유기에 연결해 여러 개의 사설 IP로 분리
     + 이 사설 IP들을 공유기에 연결되어 있는 장비들이 하나씩 받아 사용
     + 사설 IP를 상요하면 하나의 공인 IP만 가지고 여러 기기들로 인터넷을 나눠 사용 가능
```
C:\Users\young>ipconfig

Windows IP 구성


무선 LAN 어댑터 Wi-Fi:

   미디어 상태 . . . . . . . . : 미디어 연결 끊김
   연결별 DNS 접미사. . . . :

무선 LAN 어댑터 로컬 영역 연결* 9:

   미디어 상태 . . . . . . . . : 미디어 연결 끊김
   연결별 DNS 접미사. . . . :

무선 LAN 어댑터 로컬 영역 연결* 10:

   미디어 상태 . . . . . . . . : 미디어 연결 끊김
   연결별 DNS 접미사. . . . :

이더넷 어댑터 이더넷:

   연결별 DNS 접미사. . . . : Davolink
   IPv6 주소 . . . . . . . . . : 2406:5900:1020:8cb6:5127:c0ef:cd8b:c8ad
   임시 IPv6 주소. . . . . . . : 2406:5900:1020:8cb6:d52:29e9:8359:712a
   링크-로컬 IPv6 주소 . . . . : fe80::f6b:42db:9d26:cbaf%20
   IPv4 주소 . . . . . . . . . : 192.168.219.100
   서브넷 마스크 . . . . . . . : 255.255.255.0
   기본 게이트웨이 . . . . . . : fe80::1ac5:1ff:fe82:433a%20
                                 192.168.219.1

이더넷 어댑터 Bluetooth 네트워크 연결:

   미디어 상태 . . . . . . . . : 미디어 연결 끊김
   연결별 DNS 접미사. . . . :
```

<div align="center">
<img src="https://github.com/user-attachments/assets/defe3213-01a1-488e-af1d-74dc14114778">
</div>

7. IT 기업이 운영하는 인프라 환경 관점
   - 공인 IP를 사용하는 네트워크 통신망 : 공인망
   - 기업 안에서 사설 IP를 사용한 통신망 : 사설망
   - 만약, 기업에서 사용하는 IP가 124.111.46.91이라고하면, 이 IP를 각 사내 서버로 분배하주는 장비가 라우터
   - 라우터는 공유기와 비슷한 역할을 함

<div align="center">
<img src="https://github.com/user-attachments/assets/61329826-3fb4-4e10-8438-cb3b2dc62856">
</div>

8. 네트워크 인터페이스와 PORT
   - 네트워크 인터페이스 : 인터넷에 연결하기 위해 컴퓨터에 장착하는 부품 중 하나이며, IP를 가질 수 있음
     + 네트워크 인터페이스의 IP를 할당받고 인터넷에 연결하려면 네트워크 장비와 랜선으로 연결되어 있어야 함
     + 무선 기능을 지원하는 인터페이스는 랜선으로 연결하지 않고 Wi-fi에 연결해 사용할 수 있음
     + 이 하나의 기기는 한 개 이상의 네트워크 인터페이스를 장착할 수 있음
     + 따라서, 보통 유선과 무선이 다 되는 경우, 무선 네트워크 인터페이스와 유선 네트워크 인터페이스 두 개가 장착

   - 서버에는 여러 개의 소프트웨어가 실행
     + 어떤 소프트웨어로 데이터를 전달할지 지정하는 것이 PORT Number
     + 포트는 IP:PORT 형식으로 소프트웨어 지정 가능
     + 물리적으로 존재하는 것이 아닌, 서버 안에서 정의해서 사용 가능
     + 네트워크를 사용하는 프로그램은 실행될 때 사용할 포트 지정 가능
       * 예) 서버에서 실행 중인 웹 서버와 통신 : 80(HTTP), 443(HTTPS) / SSH로 통신: 22 / 파일을 주고 받을 때(FTP) : 21번 포트 지정
     + Well-Known Port : 사전에 약속되어 있는 포트

<div align="center">
<img src="https://github.com/user-attachments/assets/68fae3eb-4d4a-4f52-a040-96f4a60c0f63">
</div>

9. 네트워크 통신은 크게 Out-Bound와 In-Bound로 나눌 수 있음
    - 아웃바운드 : 하나의 서버를 기준으로 했을 때 서버에서 출발하는 신호
    - 인바운드 : 다른 클라이언트나 외부의 서버에서 출발해 자신의 서버로 오는 통신
    - 외부의 공인 IP와 내부의 사설 IP가 통신하는 방법 : NAT, Port-Forwarding 기술
      + 네트워크 신호를 보낼 때, 출발지와 목적지에 대한 정보 필요
      + 외부의 공인 IP가 유일한 주소이므로 네트워크에서 목적지 없이 문제없이 도착 가능
        * 예) 192.168.0.4의 서버 1에서 공인 IP 주소인 223.130.200.107로 데이터 전달은 어렵지 않음
      + 반대로, 외부 서버에서 출발지로 응답을 보낼 때
        * 외부 서버에서 받는 사람에 대한 정보는 124.111.46.91로 보내야, 네트워크망에서 찾기 가능하지만, 내부에서만 사용하는 IP 주소이므로 이 주소로 찾기 불가능
        * 따라서, 실제 네트워크 출발지인 192.168.0.4로 돌아오도록 추가적 처리 필요 : NAT 기술

<div align="center">
<img src="https://github.com/user-attachments/assets/4e834694-34db-4f11-891f-0af302632c10">
</div>

   - NAT(Network Address Translation) : 공인 IP와 사설 IP를 매핑해주는 기술 - 아웃바운드 요청
     + 공인 IP와 사설 IP의 매핑 테이블을 만든 뒤, 어떤 서버로 전달할지에 대한 정보 기록
     + 사설망을 구성하는 라우터 장비는 모두 NAT 기능을 가지고 있음
     + 따라서, 서버 1에서 만들어진 트래픽을 밖으로 전달할 때, 라우터는 NAT 테이블에 이 서버의 정보 기록
     + 즉, 외부 서버로 트래픽을 전달할 때 192.168.0.4에서 124.111.46.91에 10001번 포트(공인 포트 번호)로 수정해서 보내는 것
     + NAT 테이블은 공인 IP의 랜덤한 포트를 여러 개 지정해두고, 각 포트에 사설 IP 정보를 매칭시켜 활용

<div align="center">
<img src="https://github.com/user-attachments/assets/67ef5b60-240c-4e58-85e9-e13430e64954">
</div>

   - Port-Forwarding 기술 : 사용자가 직접 NAT 테이블과 같은 맵핑 정보를 관리하는 기술 - 인바운드 요청 (바깥쪽 서버에서 서버 1번이나 2번으로 직접 요청을 보낼 때)
     + 요청을 보낼 때 기본적으로 NAT 테이블의 규칙에 맞게 자동으로 생성되는 1번이나 2번 포트로 지정해서 요청을 전달하는 방법
     + 그런데 보통은 외부에서 사내망으로 요청을 보내는 경우 포트를 랜덤으로 사용하는 것보다 미리 포트를 지정해두는 것이 좋음
     + 외부에서 사내 서버로 접근한다는 것은 사내 서버에서 제공하는 특정 서비스를 사용한다는 것을 의미
     + 여기서는 서버 1번이 웹 서비스를 제공하면 80 포트, 서버 2번이 데이터베이스를 제공하면 5432 포트로 접근하는 것처럼 랜덤 포트가 아닌 사전에 정의한 포트를 제공하는 것이 좋음
     + 하지만 NAT 테이블은 동적으로 정보를 관리하여 외부에서 서버를 접근하는데 혼란이 발생할 수 있는데, 이 때 포트 포워딩 기술을 사용
     + 포트 포워딩을 설정해두면, 외부에서 공인 IP 포트에 접근할 때, 포트 포워딩 룰에 맞는 사설 IP로 변환해 트래픽을 전달
     + 즉, 외부 서버에서 124.111.46.91:80 포트로 요청을 보내면, 실제 포트 포워딩을 거쳐 서버 1의 80 포트로 전달되며, 124.111.46.91:20001으로 요청을 보내면 192.168.0.5인 서버 2번의 20001번 포트로 전달

10. 정리
    - IP는 공인 IP와 사설 IP로 나눌 수 있음
      + 공인 IP끼리 통신을 공인망, 이 공인망에서 라우터를 사용해 만들어진 내부 네트워크 망을 사설망
    - 공인망에 있는 서버들과 사설망에 있는 기기들이 통신하기 위해서는 NAT와 Port-Forwarding 기술 활용
    - NAT는 일반적으로 자동 설정되며, 포트포워딩은 사용자가 지정해서 사용해야 함

<div align="center">
<img src="https://github.com/user-attachments/assets/31ad508b-a556-46be-aa87-599870af9f11">
</div>

11. DNS (Domain Name System)
  - 웹 브라우저에서 네이버나 구글 같은 웹 사이트를 접속할 때 주소창에 접속할 주소 입력 : 도메인 주소
  - 웹 서버의 IP 주소를 입력해도 웹 서버에 접속 가능
  - IP 주소를 사용자가 의미 있는 도메인 주소로 사용해서 접근할 수 있도록 도메인 주소와 IP 주소를 매핑해주는 매핑 정보 : DNS 서버
    + DNS 서버는 도메인과 IP 주소 데이터를 가지고 있으며, 도메인 명을 입력해서 IP 주소를 찾을 수 있으며, 반대의 기능도 가능

  - 예) IP 주소가 8.8.8.8인 DNS 서버가 있다고 가정
    + DNS 서버에는 ```devwiki-docker.com```에 124.111.46.91 이라는 데이터가 존재
    + 외부 서버에서 요청을 보낼 때 ```devwiki-docker.com```으로 요청을 보내면 124.111.46.91로 요청 전달
    + 이 서버는 요청을 보내기 전 DNS 서버로 도메인 주소에 해당하는 IP 주소를 받은 다음 실제 IP 주소에 요청을 전달
   
  - DNS 서버 정보 확인 : cmd 창 - ```nslookup google.com``` 입력 - ```google.com```에 해당하는 주소인 142.250.76.14이라는 IP 주소를 얻을 수 있음
```
C:\Users\young>nslookup google.com
서버:    UnKnown
Address:  2001:270::3:1

권한 없는 응답:
이름:    google.com
Addresses:  2404:6800:4005:821::200e
          142.250.76.14
```

  - 즉, 실제 통신은 IP 주소로 이루어지지만, 클라이언트는 사람이므로 사용하기 편한 도메인 주소를 사용하는 것이 일반적이므로, 이를 매핑해주는 시스템인 DNS를 이용

<div align="center">
<img src="https://github.com/user-attachments/assets/31ad508b-a556-46be-aa87-599870af9f11">
</div>

12. 사내망 환경에서의 DNS 서버
    - 사내망에서는 별도로 DNS 서버 운영
    - 다만, 정보를 주고받는 주체가 사설망 내부 서버들로 한정, 즉 사설 IP와 도메인을 저장한 내부 DNS 서버는 사내 서버들끼리 도메인을 통신할 수 있도록 정보 제공
    - 따라서, 사내 서버들의 DNS 주소는 내부 DNS 서버인 192.169.0.7로 지정되어야 있어야함
    - 외부 DNS 서버들끼리는 온라인 상 모두 연동되고 동기화되므로, 어떤 DNS 서버를 사용해도 동일한 정보를 받을 수 있지만, 내부 DNS 서버에서는 내부 DNS 서버에 등록된 정보만 얻을 수 있음
    - 내부 DNS 설정에 따라 다르게 동작하지만, 내부 DNS 서버에 데이터가 없으면 내부 DNS 서버가 직접 외부 DNS 서버로 자기한테 없는 값을 물어볼 수 있음
      + 외부 서버 연동 설정이 되어있다면, 외부 DNS 서버의 데이터 검색 가능, 그렇지 않으면 사용 불가
